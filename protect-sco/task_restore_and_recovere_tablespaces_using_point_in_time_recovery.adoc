---
permalink: protect-sco/task_restore_and_recovere_tablespaces_using_point_in_time_recovery.html 
sidebar: sidebar 
keywords: restore, PITR, point-in-time recovery, RMAN, tablespaces 
summary: 您可以还原已损坏或丢弃的部分表空间，而不会影响数据库中的其他表空间。SnapCenter 使用 RMAN 对表空间执行时间点恢复 \ （ PITR\ ）。 
---
= 使用时间点恢复还原和恢复表空间
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以还原已损坏或丢弃的部分表空间，而不会影响数据库中的其他表空间。SnapCenter 使用 RMAN 对表空间执行时间点恢复（ PITR ）。

* 您需要的内容 *

对表空间执行 PITR 所需的备份进行编目和挂载。

* 关于此任务 *

在 PITR 操作期间， RMAN 会在指定的辅助目标上创建一个辅助实例。辅助目标可以是挂载点或 ASM 磁盘组。如果挂载位置有足够的空间，您可以重复使用其中一个挂载位置，而不是专用挂载点。

您应指定日期和时间或 SCN ，并在源数据库上还原表空间。

您可以选择并还原驻留在 ASM ， NFS 和 SAN 环境中的多个表空间。例如，如果表空间 TS2 和 TS3 驻留在 NFS 上，而 TS4 驻留在 SAN 上，则可以对单个 PITR 操作执行以还原所有表空间。


NOTE: 在 RAC 设置中，您可以从 RAC 的任何节点执行表空间的 PITR 。

* 步骤 *

. 在左侧导航窗格中，单击 * 资源 * ，然后从列表中选择相应的插件。
. 在资源页面中，从 * 视图 * 列表中选择 * 数据库 * 或 * 资源组 * 。
. 从数据库详细信息视图或资源组详细信息视图中选择类型为单实例（多租户）的数据库。
+
此时将显示数据库拓扑页面。

. 从管理副本视图中，从主存储系统或二级（镜像或复制的）存储系统中选择 * 备份 * 。
+
如果备份未编目，则应选择备份并单击 * 目录 * 。

. 选择已编目的备份，然后单击 *image:../media/restore_icon.gif["还原图标"]*
. 在还原范围页面上，执行以下任务：
+
.. 如果在 Real Application Clusters （ RAC ）环境中选择了数据库备份，请选择 RAC 节点。
.. 选择 * 表空间 * ，然后指定要还原的表空间。
+

NOTE: 您不能对 SYSAUX ，系统和撤消表空间执行 PITR 。

.. 选择 * 如果需要还原和恢复更改数据库状态 * ，将数据库的状态更改为执行还原和恢复操作所需的状态。


. 在恢复范围页面上，执行以下操作之一：
+
** 如果要恢复到特定的系统更改编号（ SCN ），请选择 * 直到 SCN * 并指定 SCN 和辅助目标。
** 如果要恢复到特定日期和时间，请选择 * 日期和时间 * 并指定日期和时间以及辅助目标。指定 SCN 或日期和时间时， SnapCenter 会列出执行 PITR 所需但未编录和挂载的备份。


. 在 PreOps 页面上，输入要在还原操作之前运行的预处理程序的路径和参数。
+
您应将此预处理程序存储在此 /var/opt/snapcenter/spl/scripts 路径或此路径中的任何文件夹中。默认情况下，系统会填充 /var/opt/snapcenter/spl/scripts 路径。如果您在此路径中创建了任何文件夹来存储脚本，则必须在此路径中指定这些文件夹。

+
您还可以指定脚本超时值。默认值为 60 秒。

. 在 PostOps 页面上，执行以下步骤：
+
.. 输入要在还原操作后运行的后脚本的路径和参数。
.. 如果要在恢复后打开数据库，请选中此复选框。


. 在通知页面的 * 电子邮件首选项 * 下拉列表中，选择要发送电子邮件通知的场景。
. 查看摘要，然后单击 * 完成 * 。
. 单击 * 监控 * > * 作业 * 以监控操作进度。


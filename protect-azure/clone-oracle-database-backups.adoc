---
permalink: protect-azure/clone-oracle-database-backups.html 
sidebar: sidebar 
keywords: SnapCenter Plug-in for Oracle Database, clone, database, backups. split clone, pluggable database 
summary: 您可以使用 SnapCenter 克隆备份。 
---
= 克隆Oracle数据库备份
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用 SnapCenter 通过数据库备份克隆 Oracle 数据库。创建的克隆为厚克隆、并在父容量池上创建。

.步骤
. 在左侧导航窗格中，单击 * 资源 * ，然后从列表中选择相应的插件。
. 在“资源”页中，从“视图”列表中选择*Database或*Resource Group*。
. 选择数据库。
. 从管理副本视图页面中、从主存储系统选择备份。
. 选择数据备份、然后单击*image:../media/clone_icon.gif["克隆图标"]*
. 在名称页面中、选择是要克隆数据库(CDB还是非CDB)还是克隆可插拔数据库(PDB)。
. 在位置页面中、指定所需的详细信息。
+
如果在手动QoS容量池中配置了Oracle数据库ANF卷、请为克隆的卷指定QoS。

+
如果未为克隆的卷指定QoS、则会使用源卷的QoS。如果使用自动QoS容量池、则指定的QoS值将被忽略。

. 在凭据页面中、执行以下操作之一：
+
.. 对于sys用户的凭据名称、选择用于定义克隆数据库的sys用户密码的凭据。
.. 对于ASM Instance凭据名称，如果启用了操作系统身份验证以连接到克隆主机上的ASM实例，请选择*None*。
+
否则、请选择配置了"sys"用户或具有适用于克隆主机的"sysasm"权限的用户的Oracle ASM凭据。



. 在"Pre-Ops"页面中、指定预置参数的路径和参数、并在"Database Parameter Settings"部分中、修改用于初始化数据库的预填充数据库参数的值。
. 默认情况下，在“操作后”页面中，选择了“恢复数据库”和“直到取消”来恢复克隆的数据库。
+
.. 如果您选择*取消*，SnapCenter将通过在选择进行克隆的数据备份之后挂载最新日志备份来执行恢复，该备份包含完整的归档日志序列。
.. 如果选择*日期和时间*，SnapCenter将数据库恢复到指定的日期和时间。
.. 如果选择*Until scn*，SnapCenter将数据库恢复到指定的scn。
.. 如果选择*指定外部归档日志位置*，SnapCenter将根据指定的scn或选定的日期和时间确定并装载最佳数量的日志备份。
.. 默认情况下，选中*Create new DBID*复选框，为克隆的数据库生成唯一编号(DBID)，将其与源数据库区分开来。
+
如果要将源数据库的 DBID 分配给克隆的数据库，请清除此复选框。在这种情况下，如果要将克隆的数据库注册到已注册源数据库的外部 RMAN 目录中，则操作将失败。

.. 如果要为克隆的数据库的默认临时表空间创建临时文件，请选中*为临时表空间创建临时文件*复选框。
.. 在*输入创建克隆时要应用的SQL条目*中，添加要在创建克隆时应用的SQL条目。
.. 在*输入克隆操作后运行的脚本*中，指定要在克隆操作后运行的PostScript的路径和参数。


. 在通知页面的 * 电子邮件首选项 * 下拉列表中，选择要发送电子邮件的场景。
. 查看摘要，然后选择*完成*。
. 通过选择*Monitor*>*Jobs*来监视操作进度。




== 克隆可插拔数据库

您可以将可插拔数据库（ PDB ）克隆到同一主机或备用主机上的其他或相同目标 CDB 。您还可以将克隆的 PDB 恢复到所需的 SCN 或日期和时间。

.步骤
. 在左侧导航窗格中，单击 * 资源 * ，然后从列表中选择相应的插件。
. 在“资源”页中，从“视图”列表中选择*Database或*Resource Group*。
. 选择类型为单实例(多租户)的数据库。
. 从管理副本视图页面中、从主存储系统选择备份。
. 选择备份，然后单击 *image:../media/clone_icon.gif["克隆图标"]*
. 在名称页面中，选择*PDB克隆*并指定其他详细信息。
. 在位置页面中、指定所需的详细信息。
. 在"Pre-Ops"页面中、指定预置参数的路径和参数、并在"Database Parameter Settings"部分中、修改用于初始化数据库的预填充数据库参数的值。
. 在"Post-Ops"页面中、默认情况下会选中*直到取消*以执行克隆数据库的恢复。
+
.. 如果您选择*取消*，SnapCenter将通过在选择进行克隆的数据备份之后挂载最新日志备份来执行恢复，该备份包含完整的归档日志序列。
.. 如果选择*日期和时间*，SnapCenter将数据库恢复到指定的日期和时间。
.. 如果选择*指定外部归档日志位置*，SnapCenter将根据指定的scn或选定的日期和时间确定并装载最佳数量的日志备份。
.. 默认情况下，选中*Create new DBID*复选框，为克隆的数据库生成唯一编号(DBID)，将其与源数据库区分开来。
+
如果要将源数据库的 DBID 分配给克隆的数据库，请清除此复选框。在这种情况下，如果要将克隆的数据库注册到已注册源数据库的外部 RMAN 目录中，则操作将失败。

.. 如果要为克隆的数据库的默认临时表空间创建临时文件，请选中*为临时表空间创建临时文件*复选框。
.. 在*输入创建克隆时要应用的SQL条目*中，添加要在创建克隆时应用的SQL条目。
.. 在*输入克隆操作后运行的脚本*中，指定要在克隆操作后运行的PostScript的路径和参数。


. 在通知页面的 * 电子邮件首选项 * 下拉列表中，选择要发送电子邮件的场景。
. 查看摘要，然后选择*完成*。
. 通过选择*Monitor*>*Jobs*来监视操作进度。

